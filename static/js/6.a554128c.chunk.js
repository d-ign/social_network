(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[6],{421:function(e,t,s){"use strict";var a=s(22),n=s(0);t.a=function(){var e=Object(n.useState)(window.innerWidth),t=Object(a.a)(e,2),s=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){return r(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[s,r]),s}},437:function(e,t,s){e.exports={chat:"Chat_chat__18S3w",membersAndMessages:"Chat_membersAndMessages__1RTR_",form:"Chat_form__3kFu7"}},439:function(e,t,s){e.exports={container:"ChatMembers_container__2TP-1",visuallyHidden:"ChatMembers_visuallyHidden__3fPWw",elementInteractive:"ChatMembers_elementInteractive__1ZGlM",inputHiddenBeforeFolding:"ChatMembers_inputHiddenBeforeFolding__2RSKX",titleWrap:"ChatMembers_titleWrap__2aqvJ",title:"ChatMembers_title__2F3c9",titleArrow:"ChatMembers_titleArrow__Vct_Z",members:"ChatMembers_members__1ERHp",member:"ChatMembers_member__2ia4a",wrapName:"ChatMembers_wrapName__13EX8",buttonShowAllWrap:"ChatMembers_buttonShowAllWrap__3Y0yM",buttonShowAll:"ChatMembers_buttonShowAll__3vJDS",notShowMembers:"ChatMembers_notShowMembers__2AwPt",titleWrapDeployed:"ChatMembers_titleWrapDeployed__1_4of"}},440:function(e,t,s){e.exports={buttonSortWrap:"ChatButtonSort_buttonSortWrap__2hZ4X",buttonSortNotShowMembers:"ChatButtonSort_buttonSortNotShowMembers__3z0o1",buttonSort:"ChatButtonSort_buttonSort___FePg"}},444:function(e,t,s){e.exports={container:"ChatMessages_container__3dBvO",visuallyHidden:"ChatMessages_visuallyHidden__2iYQw",elementInteractive:"ChatMessages_elementInteractive__24IBt"}},445:function(e,t,s){e.exports={messageContainer:"ChatMessage_messageContainer__3ipmI",myMessageContainer:"ChatMessage_myMessageContainer__D-mRN",message:"ChatMessage_message__1yqt-",nameAndMessage:"ChatMessage_nameAndMessage__1h2CE",avatar_size_medium:"ChatMessage_avatar_size_medium__15DRH",avatar_size_small:"ChatMessage_avatar_size_small__3py49"}},465:function(e,t,s){"use strict";s.r(t);var a=s(22),n=s(0),r=s(8),c=s(409),i=s(446),o=s.n(i),l=s(414),m=s(437),b=s.n(m),u=s(34),h=s(16),d=s(20),j=s.n(d),_=s(438),O=s.n(_),p=s(443),v=s(439),x=s.n(v),f=s(421),g=s(442),S=s.n(g),w=s(441),M=s.n(w),C=s(410),N=s(440),y=s.n(N),A=s(1),I=function(e){var t=e.theme,s=e.isReverseSort,a=e.setIsReverseSort,n=e.isShowAll,r=e.isShowMembers;return Object(A.jsx)("div",{className:j()(y.a.buttonSortWrap,Object(h.a)({},y.a.buttonSort,r),Object(h.a)({},y.a.buttonSortNotShowMembers,!r)),children:Object(A.jsx)(C.a,{onClick:function(){return a(!s)},disabled:!n,startIcon:s?Object(A.jsx)(M.a,{}):Object(A.jsx)(S.a,{}),style:{fontSize:"10px",marginBottom:"5px",padding:"3px 10px 3px 7px"},color:"theme1"===t?"primary":"secondary",children:"sort by name"})})},W=s(79),z=s(158),H=function(e){return e.chat.messages},R=function(e){return e.chat.messages.filter((function(e,t,s){return s.findIndex((function(t){return t.userId===e.userId}))===t?e:null}))},k=function(e){return e.chat.statusWS},B=function(e){var t=e.isShowMembers,s=e.setIsShowMembers,a=Object(f.a)(),n=function(){a<=760&&s(!t)};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h1",{className:x.a.visuallyHidden,children:"Chat members"}),Object(A.jsxs)("div",{"aria-hidden":"true",onChange:n,children:[Object(A.jsx)("input",{className:j()(x.a.visuallyHidden,x.a.inputHiddenBeforeFolding)}),Object(A.jsxs)("div",{"aria-hidden":"true",className:j()(x.a.titleWrap,x.a.elementInteractive,Object(h.a)({},x.a.titleWrapDeployed,t)),onClick:n,children:[Object(A.jsx)("h1",{className:x.a.title,children:"Members"}),Object(A.jsx)(O.a,{className:x.a.titleArrow,path:p.a,title:"ArrowShowMembers",size:"18px"})]})]})]})},E=function(e){var t=e.chatMembers,s=e.isShowAll,a=e.setIsShowAll;return Object(A.jsx)(A.Fragment,{children:t.length>2&&!s?Object(A.jsx)("div",{className:x.a.buttonShowAllWrap,children:Object(A.jsxs)("button",{type:"button",className:x.a.buttonShowAll,onClick:function(){return a(!0)},children:["show all ",t.length," ..."]})}):""})},F=function(e){var t=e.theme,s=Object(r.d)(R),c=Object(n.useState)(!1),i=Object(a.a)(c,2),o=i[0],l=i[1],m=Object(n.useState)(!1),b=Object(a.a)(m,2),d=b[0],_=b[1],O=Object(n.useState)(!1),p=Object(a.a)(O,2),v=p[0],f=p[1],g=o?s.length:2;return Object(A.jsxs)("section",{hidden:!s.length,className:x.a.container,children:[Object(A.jsx)(B,{isShowMembers:v,setIsShowMembers:f}),Object(A.jsx)(I,{theme:t,isShowAll:o,isShowMembers:v,isReverseSort:d,setIsReverseSort:_}),Object(A.jsxs)("div",{className:j()(Object(h.a)({},x.a.members,v),Object(h.a)({},x.a.notShowMembers,!v)),children:[s&&Object(u.a)(s).slice(0,g).sort((function(e,t){return d?t.userName.localeCompare(e.userName):e.userName.localeCompare(t.userName)})).map((function(e){return Object(A.jsxs)("div",{className:x.a.member,children:[Object(A.jsx)(W.a,{photo:e.photo,size:"small",id:e.userId}),Object(A.jsx)("div",{className:x.a.wrapName,children:Object(A.jsx)(z.a,{id:e.userId,name:e.userName,size:"small"})})]},e.userId)})),Object(A.jsx)(E,{chatMembers:s,isShowAll:o,setIsShowAll:l})]})]})},D=s(444),P=s.n(D),T=s(445),J=s.n(T),L=s(32),X=function(e){var t=e.message,s=t.userId,a=t.photo,n=t.userName,c=t.message,i=Object(r.d)(L.a);return Object(A.jsxs)("article",{className:j()(J.a.messageContainer,Object(h.a)({},J.a.myMessageContainer,i===s)),children:[Object(A.jsx)("div",{className:J.a.avatar_size_medium,children:Object(A.jsx)(W.a,{photo:a,size:"medium",id:s})}),Object(A.jsx)("div",{hidden:!0,className:J.a.avatar_size_small,children:Object(A.jsx)(W.a,{photo:a,size:"small",id:s})}),Object(A.jsxs)("div",{className:J.a.nameAndMessage,children:[Object(A.jsx)(z.a,{id:s,name:n,size:"normal"}),Object(A.jsx)("div",{className:J.a.message,children:c})]})]})},Z=Object(n.memo)(X),q=s(161),V=function(){var e=Object(r.d)(H),t=Object(n.useRef)(null),s=Object(n.useState)(!0),c=Object(a.a)(s,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){var e;i&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e,i]),Object(A.jsxs)("section",{className:P.a.container,onScroll:function(e){var t=e.currentTarget,s=t.scrollHeight-t.scrollTop-t.clientHeight;Math.abs(s)<1?i||o(!0):i&&o(!1)},children:[Object(A.jsx)("h1",{className:P.a.visuallyHidden,children:"Chat messages"}),e.length?e.filter((function(e){return e.message.trim().length>0})).map((function(e){return Object(A.jsx)(Z,{message:e},e.id)})):Object(A.jsx)(q.a,{elements:"messages",writeSomething:!0}),Object(A.jsx)("div",{ref:t})]})},Y=Object(n.memo)(V),G=s(23),K=s(196),Q=function(e){var t=e.theme,s=e.status,i=Object(r.c)(),m=Object(n.useState)(""),u=Object(a.a)(m,2),h=u[0],d=u[1];return Object(A.jsx)("div",{className:b.a.wrapForm,children:Object(A.jsxs)("div",{className:b.a.form,children:[Object(A.jsx)(l.a,{name:"newMessageText",placeholder:"Enter your message...",fullWidth:!0,variant:"outlined",inputProps:{maxLength:100},color:"theme1"===t?"primary":"secondary",onChange:function(e){return d(e.currentTarget.value)},value:h}),Object(A.jsx)(c.a,{title:"Send message",color:"theme1"===t?"primary":"secondary",style:{margin:"5px"},onClick:function(){h.trim()&&(i(Object(K.b)(h)),d(""))},disabled:"pending"===s,children:Object(A.jsx)(o.a,{})})]})})};t.default=function(){var e=Object(r.d)(k),t=Object(r.d)(G.b),s=Object(r.c)();return Object(n.useEffect)((function(){return s(Object(K.c)()),function(){s(Object(K.d)())}}),[s]),Object(A.jsxs)("main",{className:b.a.chat,children:["error"===e&&Object(A.jsx)("div",{children:"Some error occured. Please, refresh the page..."}),Object(A.jsxs)("div",{className:b.a.membersAndMessages,children:[Object(A.jsx)(Y,{}),Object(A.jsx)(F,{theme:t})]}),Object(A.jsx)(Q,{theme:t,status:e})]})}}}]);
//# sourceMappingURL=6.a554128c.chunk.js.map
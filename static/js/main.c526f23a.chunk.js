(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{124:function(t,e,n){"use strict";e.a=n.p+"static/media/no_photo.0ddfe4d4.png"},125:function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var a=n(43),r=n(5),s="SEND-MESSAGE",o={dialogs:[{id:"1",name:"Denis"},{id:"2",name:"Andrey"},{id:"3",name:"Alexandr"},{id:"4",name:"Alisa"}],messages:[{id:"1",message:"Hi!"},{id:"2",message:"lalalalalalala"},{id:"3",message:"How are you?"}]},c=function(t){return{type:s,newMessageBody:t}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:return Object(r.a)(Object(r.a)({},t),{},{messages:[].concat(Object(a.a)(t.messages),[{id:"6",message:e.newMessageBody}])});default:return t}}},129:function(t,e,n){"use strict";n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return _})),n.d(e,"c",(function(){return w})),n.d(e,"b",(function(){return y})),n.d(e,"f",(function(){return P}));var a=n(17),r=n.n(a),s=n(31),o=n(43),c=n(5),i=n(13),u=function(t,e,n,a){return t.map((function(t){return t[n]===e?Object(c.a)(Object(c.a)({},t),a):t}))},l="FOLLOW",f="UNFOLLOW",d="SET-USERS",p="SET-CURRENT-PAGE",j="SET-TOTAL-USERS-COUNT",b="TOGGLE-IS-FETCHING",h="TOGGLE-IS-FOLLOWING-PROGRESS",O={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},g=function(t){return{type:l,userID:t}},m=function(t){return{type:f,userID:t}},v=function(t){return{type:p,currentPage:t}},x=function(t){return{type:b,isFetching:t}},_=function(t,e){return{type:h,isFetching:t,userID:e}},w=function(t,e){return function(n){n(x(!0)),i.c.getUsers(t,e).then((function(t){var e,a;n((e=t.items,{type:d,users:e})),n((a=t.totalCount,{type:j,count:a})),n(x(!1))}))}},S=function(){var t=Object(s.a)(r.a.mark((function t(e,n,a,s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(_(!0,n)),t.next=3,a(n);case 3:0===t.sent.data.resultCode&&e(s(n)),e(_(!1,n));case 6:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),y=function(t){return function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,i.c.followUser.bind(i.c),g);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t){return function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,i.c.unfollowUser.bind(i.c),m);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(c.a)(Object(c.a)({},t),{},{users:u(t.users,e.userID,"id",{followed:!0})});case f:return Object(c.a)(Object(c.a)({},t),{},{users:u(t.users,e.userID,"id",{followed:!1})});case d:return Object(c.a)(Object(c.a)({},t),{},{users:e.users});case p:return Object(c.a)(Object(c.a)({},t),{},{currentPage:e.currentPage});case j:return Object(c.a)(Object(c.a)({},t),{},{totalUsersCount:e.count});case b:return Object(c.a)(Object(c.a)({},t),{},{isFetching:e.isFetching});case h:return Object(c.a)(Object(c.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(o.a)(t.followingInProgress),[e.userID]):t.followingInProgress.filter((function(t){return t!==e.userID}))});default:return t}}},13:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var a=n(130),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9fe42175-1733-4793-9c3f-72022637a8a0"}}),s={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},followUser:function(t){return r.post("follow/".concat(t),{})},unfollowUser:function(t){return r.delete("follow/".concat(t))},getProfile:function(t){return console.warn("Obsolete method. Please, use profileAPI object."),o.getProfile(t)}},o={getProfile:function(t){return r.get("profile/".concat(t))},getStatus:function(t){return r.get("profile/status/".concat(t))},updateStatus:function(t){return r.put("profile/status",{status:t})},savePhotoAPI:function(t){var e=new FormData;return e.append("image",t),r.put("profile/photo",e,{headers:{"Content-Type":"multipart/form-data"}})}},c={me:function(){return r.get("auth/me")},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("/auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return r.delete("/auth/login")}}},131:function(t,e,n){t.exports={pageWall__newPost:"Post_pageWall__newPost__3K832"}},164:function(t,e,n){},288:function(t,e,n){},289:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(65),o=n.n(s),c=n(26),i=n(35),u=n(28),l=n(27),f=(n(164),n(5)),d=n.p+"static/media/logo.cebb0f3e.svg",p=n(44),j=n.n(p),b=n(23),h=n(1),O=function(t){return Object(h.jsxs)("header",{className:j.a.header,children:[Object(h.jsx)("img",{src:d,alt:"logo"}),Object(h.jsx)("div",{className:j.a.loginBlock,children:t.isAuth?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:j.a.login_name,children:t.login}),Object(h.jsx)("button",{className:j.a.logout,onClick:t.logoutThunk,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(h.jsx)(b.b,{className:j.a.login_link,to:"/login",children:"Login"})})]})},g=n(11),m=n(17),v=n.n(m),x=n(31),_=n(13),w=n(46),S="auth/SET-USER-DATA",y={userID:null,email:null,login:null,isAuth:!1},P=function(t,e,n,a){return{type:S,payload:{userID:t,email:e,login:n,isAuth:a}}},k=function(){return function(){var t=Object(x.a)(v.a.mark((function t(e){var n,a,r,s,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.me();case 2:0===(n=t.sent).data.resultCode&&(a=n.data.data,r=a.id,s=a.email,o=a.login,e(P(r,s,o,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(){return function(t){_.a.logout().then((function(e){0===e.data.resultCode&&t(P(null,null,null,!1))}))}},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return Object(f.a)(Object(f.a)({},t),e.payload);default:return t}},T=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).render=function(){return Object(h.jsx)(O,Object(f.a)({},t.props))},t}return n}(r.a.Component),E=Object(g.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logoutThunk:C})(T),N=n(56),F=n.n(N),A=function(){return Object(h.jsxs)("nav",{className:F.a.nav,children:[Object(h.jsx)(b.b,{to:"/profile",activeClassName:F.a.active,children:"Profile"}),Object(h.jsx)(b.b,{to:"/dialogs",activeClassName:F.a.active,children:"Messages"}),Object(h.jsx)(b.b,{to:"/users",activeClassName:F.a.active,children:"Find Users"})]})},U=n(9),D=n(43),M="ADD-POST",L="SET-USER",W="SET-STATUS",R="DELETE-POST",z="SAVE_PHOTO_SUCCESS",H={posts:[{id:"1",message:"\u0421\u0442\u0435\u043d\u0430 \u041f\u0440\u0438\u0432\u0435\u0442!",likesCount:12},{id:"2",message:"\u0421\u0442\u0435\u043d\u0430 \u041a\u0430\u043a \u0434\u0435\u043b\u0430?",likesCount:4}],profile:null,status:""},B=function(t){return{type:W,status:t}},G=function(t){return{type:z,photos:t}},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case M:var n={id:5,message:e.newPostText,likesCount:0};return Object(f.a)(Object(f.a)({},t),{},{posts:[].concat(Object(D.a)(t.posts),[n])});case L:return Object(f.a)(Object(f.a)({},t),{},{profile:e.profile});case W:return Object(f.a)(Object(f.a)({},t),{},{status:e.status});case R:return Object(f.a)(Object(f.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.postID}))});case z:return Object(f.a)(Object(f.a)({},t),{},{profile:Object(f.a)(Object(f.a)({},t.profile),{},{photo:e.photo})});default:return t}},Y=n(131),Z=n.n(Y),q=n.p+"static/media/avatar_2.e0878a2c.jpg",J=function(t){return Object(h.jsxs)("div",{className:Z.a.pageWall__newPost,children:[Object(h.jsx)("img",{src:q,alt:"avatar"}),t.message,t.likesCount," ",Object(h.jsx)("button",{children:"like"})]})},K=n(89),Q=n.n(K),V=n(126),$=n(127),tt=n(39),et=n(66),nt=Object(tt.a)(30),at=Object(et.a)("textarea"),rt=Object($.a)({form:"profileNewPostForm"})((function(t){return Object(h.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(h.jsx)(V.a,{name:"newPostText",component:at,validate:[nt],placeholder:"Write post..."}),Object(h.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"})]})})),st=function(t){var e=t.posts.map((function(t){return Object(h.jsx)(J,{message:t.message,likesCount:t.likesCount},t.id)}));return Object(h.jsxs)("div",{className:Q.a.pageWall,children:[Object(h.jsx)("span",{className:Q.a.pageWall__title,children:"\u0421\u0442\u0435\u043d\u0430"}),Object(h.jsx)(rt,{onSubmit:function(e){t.addPost(e.newPostText)}}),e]})},ot=Object(g.b)((function(t){return{posts:t.profilePage.posts}}),{addPost:function(t){return{type:M,newPostText:t}}})(st),ct=n(38),it=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={editMode:!1,status:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.handleFocus=function(t){t.target.select()},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(t){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.state.editMode?Object(h.jsx)("input",{autoFocus:!0,onFocus:this.handleFocus,onChange:this.onStatusChange,onBlur:this.deactivateEditMode,value:this.state.status}):Object(h.jsx)("span",{onClick:this.activateEditMode,children:this.props.status})})}}]),n}(r.a.Component),ut=n(70),lt=n.n(ut),ft=n(124),dt=function(t){if(!t.profile)return Object(h.jsx)(ct.a,{});return Object(h.jsxs)("div",{className:"".concat(lt.a.pageInfo__data," ").concat(lt.a.dataRow),children:[Object(h.jsx)("img",{src:t.profile.photos.large||ft.a,alt:"avatar"}),t.isOwner&&Object(h.jsx)("input",{onChange:function(e){e.target.files.length&&t.savePhotoThunk(e.target.files[0])},type:"file"}),Object(h.jsx)(it,{status:t.status,updateStatus:t.updateStatus}),Object(h.jsxs)("div",{className:lt.a.about,children:[Object(h.jsx)("p",{children:t.profile.aboutMe}),Object(h.jsx)("a",{href:t.profile.contacts.facebook,children:"facebook"}),Object(h.jsx)("a",{href:t.profile.contacts.website,children:"website"}),Object(h.jsx)("a",{href:t.profile.contacts.vk,children:"vk"}),Object(h.jsx)("a",{href:t.profile.contacts.twitter,children:"twitter"}),Object(h.jsx)("a",{href:t.profile.contacts.instagram,children:"instagram"}),Object(h.jsx)("a",{href:t.profile.contacts.youtube,children:"youtube"}),Object(h.jsx)("a",{href:t.profile.contacts.github,children:"github"})]})]})},pt=n(10),jt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserID)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(dt,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhotoThunk:this.props.savePhotoThunk}),Object(h.jsx)(ot,{})]})}}]),n}(r.a.Component),bt=Object(pt.d)(Object(g.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserID:t.auth.userID,isAuth:t.auth.isAuth}}),{getUserProfile:function(t){return function(e){_.c.getProfile(t).then((function(t){var n;e((n=t.data,{type:L,profile:n}))}))}},getStatus:function(t){return function(e){_.b.getStatus(t).then((function(t){e(B(t.data))}))}},updateStatus:function(t){return function(e){_.b.updateStatus(t).then((function(n){0===n.data.resultCode&&e(B(t))}))}},savePhotoThunk:function(t){return function(){var e=Object(x.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.b.savePhotoAPI(t);case 2:0===(a=e.sent).data.resultCode&&n(G(a.data.data.photos));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),U.g)(jt),ht=n(45),Ot=n.n(ht),gt=Object(tt.a)(30),mt=Object(et.a)("input"),vt=Object($.a)({form:"loginForm"})((function(t){var e=t.handleSubmit,n=t.error;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("form",{onSubmit:e,children:Object(h.jsxs)("div",{className:"form",children:[Object(h.jsxs)("div",{className:Ot.a.row,children:[Object(h.jsx)("label",{for:"email",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(h.jsx)(V.a,{id:"email",type:"email",name:"email",component:mt,validate:[tt.b,gt]})]}),Object(h.jsxs)("div",{className:Ot.a.row,children:[Object(h.jsx)("label",{for:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(h.jsx)(V.a,{id:"password",type:"password",name:"password",component:mt,validate:[tt.b,gt]})]}),Object(h.jsx)("div",{className:Ot.a.row,children:Object(h.jsxs)("label",{for:"save",children:[Object(h.jsx)(V.a,{id:"save",type:"checkbox",name:"rememberMe",component:mt,validate:[]}),"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"]})}),Object(h.jsxs)("div",{className:Ot.a.row,children:[Object(h.jsx)("button",{children:"\u0412\u043e\u0439\u0442\u0438"}),n&&Object(h.jsx)("span",{className:Ot.a.formError,children:n})]})]})})})})),xt=Object(g.b)((function(t){return{isAuth:t.auth.isAuth,id:t.auth.id}}),{loginThunk:function(t,e,n){return function(a){_.a.login(t,e,n).then((function(t){if(0===t.data.resultCode)a(k());else{var e=t.data.messages,n=Object(w.a)("loginForm",{_error:e.length>0?e[0]:"Some error"});a(n)}}))}},logoutThunk:C})((function(t){return t.isAuth?Object(h.jsx)(U.a,{to:"/profile/".concat(t.id)}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(h.jsx)(vt,{onSubmit:function(e){t.loginThunk(e.email,e.password,e.rememberMe)},logoutThunk:C})]})})),_t="INITIALIZED_SUCCESS",wt={initialized:!1},St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _t:return Object(f.a)(Object(f.a)({},t),{},{initialized:!0});default:return t}},yt=n(125),Pt=n(129),kt=n(133),Ct=n(128),It=Object(pt.c)({profilePage:X,messagesPage:yt.a,usersPage:Pt.a,auth:I,app:St,form:Ct.a}),Tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pt.d,Et=Object(pt.e)(It,Tt(Object(pt.a)(kt.a))),Nt=function(t){return function(e){return Object(h.jsx)(a.Suspense,{fallback:Object(h.jsx)(ct.a,{}),children:Object(h.jsx)(t,Object(f.a)({},e))})}},Ft=r.a.lazy((function(){return n.e(4).then(n.bind(null,296))})),At=r.a.lazy((function(){return n.e(3).then(n.bind(null,295))})),Ut=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppThunk()}},{key:"render",value:function(){var t=this;return this.props.initialized?Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"app-wrapper",children:[Object(h.jsx)(E,{}),Object(h.jsx)(A,{}),Object(h.jsx)("div",{className:"app-wrapper-content",children:Object(h.jsxs)(U.d,{children:[Object(h.jsx)(U.a,{exact:!0,from:"/",to:"/profile"}),Object(h.jsx)(U.b,{path:"/dialogs",render:Nt(Ft)}),Object(h.jsx)(U.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(bt,{})}}),Object(h.jsx)(U.b,{path:"/users",render:Nt(At)}),Object(h.jsx)(U.b,{path:"/login",render:function(){return Object(h.jsx)(xt,{login:t.props.login})}})]})})]})}):Object(h.jsx)(ct.a,{})}}]),n}(r.a.Component),Dt=Object(pt.d)(U.g,Object(g.b)((function(t){return{initialized:t.app.initialized}}),{initializeAppThunk:function(){return function(t){Promise.all([t(k())]).then((function(){t({type:_t})}))}}}))(Ut),Mt=function(t){return Object(h.jsx)(b.a,{children:Object(h.jsx)(g.a,{store:Et,children:Object(h.jsx)(Dt,{})})})},Lt=(n(288),function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,294)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),s(t),o(t)}))});o.a.render(Object(h.jsx)(Mt,{}),document.getElementById("root")),Lt()},38:function(t,e,n){"use strict";n(0);var a=n.p+"static/media/preloader.4ae1bcf5.svg",r=n(1);e.a=function(){return Object(r.jsx)("img",{src:a,alt:"preloader"})}},39:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r}));var a=function(t){return t?void 0:"Field required"},r=function(t){return function(e){return e&&e.length>t?"Max length is ".concat(t," symbols"):void 0}}},44:function(t,e,n){t.exports={header:"Header_header__3vTSi",loginBlock:"Header_loginBlock__6uxXp",login_name:"Header_login_name__wMDmp",logout:"Header_logout__1ZICm",login_link:"Header_login_link__27bgb"}},45:function(t,e,n){t.exports={form:"Login_form__2iBfo",row:"Login_row__3d41Y",formError:"Login_formError__3j1Nj"}},56:function(t,e,n){t.exports={nav:"Navbar_nav__3R0rh",active:"Navbar_active__2b-XZ"}},66:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(5),r=n(134),s=(n(0),n(90)),o=n.n(s),c=n(1),i=function(t){return function(e){var n=e.input,s=e.meta,i=s.touched,u=s.error,l=Object(r.a)(e,["input","meta"]),f=i&&u;return Object(c.jsxs)("div",{className:o.a.formControl+" "+(f?o.a.error:""),children:[Object(c.jsx)(t,Object(a.a)(Object(a.a)({},n),l)),f&&Object(c.jsx)("span",{children:u})]})}}},70:function(t,e,n){t.exports={pageInfo__data:"ProfileInfo_pageInfo__data__1OoU4",about:"ProfileInfo_about__3U-jH",dataRow:"ProfileInfo_dataRow__UsqXF"}},89:function(t,e,n){t.exports={pageWall:"Wall_pageWall__1-MWp",pageWall__title:"Wall_pageWall__title__2QIQW"}},90:function(t,e,n){t.exports={formControl:"FormsControls_formControl__3IH-n",error:"FormsControls_error__3Y1wO"}}},[[289,1,2]]]);
//# sourceMappingURL=main.c526f23a.chunk.js.map
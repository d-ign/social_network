(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[6],{436:function(e,t,s){"use strict";var a=s(24),n=s(0);t.a=function(){var e=Object(n.useState)(window.innerWidth),t=Object(a.a)(e,2),s=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){return r(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[s,r]),s}},451:function(e,t,s){e.exports={chat:"Chat_chat__1rEwv",membersAndMessages:"Chat_membersAndMessages__2ItM4",form:"Chat_form__Fkn99"}},453:function(e,t,s){e.exports={container:"ChatMembers_container__e_-rU",visuallyHidden:"ChatMembers_visuallyHidden__3uaU0",elementInteractive:"ChatMembers_elementInteractive__3vDh8",inputHiddenBeforeFolding:"ChatMembers_inputHiddenBeforeFolding__RXHe1",titleWrap:"ChatMembers_titleWrap__2uSSk",title:"ChatMembers_title__ZYl8G",titleArrow:"ChatMembers_titleArrow__1OZGL",members:"ChatMembers_members__ulC2j",member:"ChatMembers_member__3F1wG",wrapName:"ChatMembers_wrapName__nfvvz",buttonShowAllWrap:"ChatMembers_buttonShowAllWrap__T-zs6",buttonShowAll:"ChatMembers_buttonShowAll__3S5vv",notShowMembers:"ChatMembers_notShowMembers__14IbE",titleWrapDeployed:"ChatMembers_titleWrapDeployed__Ujnk5"}},454:function(e,t,s){e.exports={buttonSortWrap:"ChatButtonSort_buttonSortWrap__iGn4h",buttonSortNotShowMembers:"ChatButtonSort_buttonSortNotShowMembers__YqxJ0",buttonSort:"ChatButtonSort_buttonSort__2ekxv"}},458:function(e,t,s){e.exports={container:"ChatMessages_container__FHgFA",visuallyHidden:"ChatMessages_visuallyHidden__1zqjT",elementInteractive:"ChatMessages_elementInteractive__1PZ8K"}},459:function(e,t,s){e.exports={myMessageContainer:"ChatMessage_myMessageContainer__1mzJy",messageContainer:"ChatMessage_messageContainer__cksYS",message:"ChatMessage_message__1_CEE",nameAndMessage:"ChatMessage_nameAndMessage__1_LdY",avatar_size_medium:"ChatMessage_avatar_size_medium__1w73R",avatar_size_small:"ChatMessage_avatar_size_small__2gXJg"}},479:function(e,t,s){"use strict";s.r(t);var a=s(24),n=s(0),r=s(426),c=s(460),i=s.n(c),o=s(430),l=s(451),m=s.n(l),b=s(39),u=s(15),h=s(16),j=s.n(h),d=s(452),_=s.n(d),O=s(457),v=s(453),g=s.n(v),x=s(456),p=s.n(x),f=s(455),S=s.n(f),w=s(222),M=s(454),C=s.n(M),N=s(1),y=function(e){var t=e.theme,s=e.isReverseSort,a=e.setIsReverseSort,n=e.isShowAll,r=e.isShowMembers;return Object(N.jsx)("div",{className:j()(C.a.buttonSortWrap,Object(u.a)({},C.a.buttonSort,r),Object(u.a)({},C.a.buttonSortNotShowMembers,!r)),children:Object(N.jsx)(w.a,{onClick:function(){return a(!s)},disabled:!n,startIcon:s?Object(N.jsx)(S.a,{}):Object(N.jsx)(p.a,{}),style:{fontSize:"10px",marginBottom:"5px",padding:"3px 10px 3px 7px"},color:"theme1"===t?"primary":"secondary",children:"sort by name"})})},A=s(83),I=s(158),z=s(436),W=s(8),H=function(e){return e.chatPage.messages},k=function(e){return e.chatPage.messages.filter((function(e,t,s){return s.findIndex((function(t){return t.userId===e.userId}))===t?e:null}))},E=function(e){return e.chatPage.statusWS},F=function(e){var t=e.isShowMembers,s=e.setIsShowMembers,a=Object(z.a)(),n=function(){a<=760&&s(!t)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{className:g.a.visuallyHidden,children:"Chat members"}),Object(N.jsxs)("div",{"aria-hidden":"true",onChange:n,children:[Object(N.jsx)("input",{className:j()(g.a.visuallyHidden,g.a.inputHiddenBeforeFolding)}),Object(N.jsxs)("div",{"aria-hidden":"true",className:j()(g.a.titleWrap,g.a.elementInteractive,Object(u.a)({},g.a.titleWrapDeployed,t)),onClick:n,children:[Object(N.jsx)("h1",{className:g.a.title,children:"Members"}),Object(N.jsx)(_.a,{className:g.a.titleArrow,path:O.a,title:"ArrowShowMembers",size:"18px"})]})]})]})},B=function(e){var t=e.chatMembers,s=e.isShowAll,a=e.setIsShowAll;return Object(N.jsx)(N.Fragment,{children:t.length>2&&!s?Object(N.jsx)("div",{className:g.a.buttonShowAllWrap,children:Object(N.jsxs)("button",{type:"button",className:g.a.buttonShowAll,onClick:function(){return a(!0)},children:["show all ",t.length," ..."]})}):""})},R=function(e){var t=e.theme,s=Object(W.b)(k),r=Object(n.useState)(!1),c=Object(a.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(!1),m=Object(a.a)(l,2),h=m[0],d=m[1],_=Object(n.useState)(!1),O=Object(a.a)(_,2),v=O[0],x=O[1],p=i?s.length:2;return Object(N.jsxs)("section",{hidden:!s.length,className:g.a.container,children:[Object(N.jsx)(F,{isShowMembers:v,setIsShowMembers:x}),Object(N.jsx)(y,{theme:t,isShowAll:i,isShowMembers:v,isReverseSort:h,setIsReverseSort:d}),Object(N.jsxs)("div",{className:j()(Object(u.a)({},g.a.members,v),Object(u.a)({},g.a.notShowMembers,!v)),children:[s&&Object(b.a)(s).slice(0,p).sort((function(e,t){return h?t.userName.localeCompare(e.userName):e.userName.localeCompare(t.userName)})).map((function(e){return Object(N.jsxs)("div",{className:g.a.member,children:[Object(N.jsx)(A.a,{photo:e.photo,size:"small",id:e.userId}),Object(N.jsx)("div",{className:g.a.wrapName,children:Object(N.jsx)(I.a,{id:e.userId,name:e.userName,size:"small"})})]},e.userId)})),Object(N.jsx)(B,{chatMembers:s,isShowAll:i,setIsShowAll:o})]})]})},P=s(458),T=s.n(P),J=s(459),L=s.n(J),D=s(30),G=function(e){var t=e.message,s=t.userId,a=t.photo,n=t.userName,r=t.message,c=Object(W.b)(D.a);return Object(N.jsxs)("article",{className:j()(L.a.messageContainer,Object(u.a)({},L.a.myMessageContainer,c===s)),children:[Object(N.jsx)("div",{className:L.a.avatar_size_medium,children:Object(N.jsx)(A.a,{photo:a,size:"medium",id:s})}),Object(N.jsx)("div",{hidden:!0,className:L.a.avatar_size_small,children:Object(N.jsx)(A.a,{photo:a,size:"small",id:s})}),Object(N.jsxs)("div",{className:L.a.nameAndMessage,children:[Object(N.jsx)(I.a,{id:s,name:n,size:"normal"}),Object(N.jsx)("div",{className:L.a.message,children:r})]})]})},Y=Object(n.memo)(G),U=s(162),Z=function(){var e=Object(W.b)(H),t=Object(n.useRef)(null),s=Object(n.useState)(!0),r=Object(a.a)(s,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){var e;c&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e,c]),Object(N.jsxs)("section",{className:T.a.container,onScroll:function(e){var t=e.currentTarget,s=t.scrollHeight-t.scrollTop-t.clientHeight;Math.abs(s)<1?c||i(!0):c&&i(!1)},children:[Object(N.jsx)("h1",{className:T.a.visuallyHidden,children:"Chat messages"}),e.length?e.filter((function(e){return e.message.trim().length>0})).map((function(e){return Object(N.jsx)(Y,{message:e},e.id)})):Object(N.jsx)(U.a,{elements:"messages",writeSomething:!0}),Object(N.jsx)("div",{ref:t})]})},q=Object(n.memo)(Z),X=s(163),K=s(23),V=s(199),Q=function(e){var t=e.theme,s=e.status,c=Object(W.a)(),l=Object(n.useState)(""),b=Object(a.a)(l,2),u=b[0],h=b[1];return Object(N.jsx)("div",{className:m.a.wrapForm,children:Object(N.jsxs)("div",{className:m.a.form,children:[Object(N.jsx)(o.a,{name:"newMessageText",placeholder:"Enter your message...",fullWidth:!0,variant:"outlined",inputProps:{maxLength:100},color:"theme1"===t?"primary":"secondary",onChange:function(e){return h(e.currentTarget.value)},value:u}),Object(N.jsx)(r.a,{title:"Send message",color:"theme1"===t?"primary":"secondary",style:{margin:"5px"},onClick:function(){u.trim()&&(c(Object(V.b)(u)),h(""))},disabled:"pending"===s,children:Object(N.jsx)(i.a,{})})]})})};t.default=Object(X.a)((function(){var e=Object(W.b)(E),t=Object(W.b)(K.b),s=Object(W.a)();return Object(n.useEffect)((function(){return s(Object(V.c)()),function(){s(Object(V.d)())}}),[s]),Object(N.jsxs)("main",{className:m.a.chat,children:["error"===e&&Object(N.jsx)("div",{children:"Some error occured. Please, refresh the page..."}),Object(N.jsxs)("div",{className:m.a.membersAndMessages,children:[Object(N.jsx)(q,{}),Object(N.jsx)(R,{theme:t})]}),Object(N.jsx)(Q,{theme:t,status:e})]})}))}}]);
//# sourceMappingURL=6.4adc84c4.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{124:function(t,e,n){"use strict";e.a=n.p+"static/media/no_photo.0ddfe4d4.png"},125:function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var a=n(42),r=n(5),s="SEND-MESSAGE",o={dialogs:[{id:"1",name:"Denis"},{id:"2",name:"Andrey"},{id:"3",name:"Alexandr"},{id:"4",name:"Alisa"}],messages:[{id:"1",message:"Hi!"},{id:"2",message:"lalalalalalala"},{id:"3",message:"How are you?"}]},c=function(t){return{type:s,newMessageBody:t}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:return Object(r.a)(Object(r.a)({},t),{},{messages:[].concat(Object(a.a)(t.messages),[{id:"6",message:e.newMessageBody}])});default:return t}}},129:function(t,e,n){"use strict";n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return _})),n.d(e,"c",(function(){return w})),n.d(e,"b",(function(){return y})),n.d(e,"f",(function(){return P}));var a=n(22),r=n.n(a),s=n(43),o=n(42),c=n(5),i=n(14),u=function(t,e,n,a){return t.map((function(t){return t[n]===e?Object(c.a)(Object(c.a)({},t),a):t}))},l="FOLLOW",d="UNFOLLOW",f="SET-USERS",j="SET-CURRENT-PAGE",p="SET-TOTAL-USERS-COUNT",b="TOGGLE-IS-FETCHING",h="TOGGLE-IS-FOLLOWING-PROGRESS",O={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},g=function(t){return{type:l,userID:t}},m=function(t){return{type:d,userID:t}},v=function(t){return{type:j,currentPage:t}},x=function(t){return{type:b,isFetching:t}},_=function(t,e){return{type:h,isFetching:t,userID:e}},w=function(t,e){return function(n){n(x(!0)),i.c.getUsers(t,e).then((function(t){var e,a;n((e=t.items,{type:f,users:e})),n((a=t.totalCount,{type:p,count:a})),n(x(!1))}))}},S=function(){var t=Object(s.a)(r.a.mark((function t(e,n,a,s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(_(!0,n)),t.next=3,a(n);case 3:0===t.sent.data.resultCode&&e(s(n)),e(_(!1,n));case 6:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),y=function(t){return function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,i.c.followUser.bind(i.c),g);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t){return function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,i.c.unfollowUser.bind(i.c),m);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(c.a)(Object(c.a)({},t),{},{users:u(t.users,e.userID,"id",{followed:!0})});case d:return Object(c.a)(Object(c.a)({},t),{},{users:u(t.users,e.userID,"id",{followed:!1})});case f:return Object(c.a)(Object(c.a)({},t),{},{users:e.users});case j:return Object(c.a)(Object(c.a)({},t),{},{currentPage:e.currentPage});case p:return Object(c.a)(Object(c.a)({},t),{},{totalUsersCount:e.count});case b:return Object(c.a)(Object(c.a)({},t),{},{isFetching:e.isFetching});case h:return Object(c.a)(Object(c.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(o.a)(t.followingInProgress),[e.userID]):t.followingInProgress.filter((function(t){return t!==e.userID}))});default:return t}}},131:function(t,e,n){t.exports={pageWall__newPost:"Post_pageWall__newPost__3K832"}},14:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var a=n(130),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9fe42175-1733-4793-9c3f-72022637a8a0"}}),s={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},followUser:function(t){return r.post("follow/".concat(t),{})},unfollowUser:function(t){return r.delete("follow/".concat(t))},getProfile:function(t){return console.warn("Obsolete method. Please, use profileAPI object."),o.getProfile(t)}},o={getProfile:function(t){return r.get("profile/".concat(t))},getStatus:function(t){return r.get("profile/status/".concat(t))},updateStatus:function(t){return r.put("profile/status",{status:t})}},c={me:function(){return r.get("auth/me")},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("/auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return r.delete("/auth/login")}}},164:function(t,e,n){},288:function(t,e,n){},289:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(65),o=n.n(s),c=n(26),i=n(35),u=n(28),l=n(27),d=(n(164),n(5)),f=n.p+"static/media/logo.cebb0f3e.svg",j=n(44),p=n.n(j),b=n(23),h=n(1),O=function(t){return Object(h.jsxs)("header",{className:p.a.header,children:[Object(h.jsx)("img",{src:f,alt:"logo"}),Object(h.jsx)("div",{className:p.a.loginBlock,children:t.isAuth?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:p.a.login_name,children:t.login}),Object(h.jsx)("button",{className:p.a.logout,onClick:t.logoutThunk,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(h.jsx)(b.b,{className:p.a.login_link,to:"/login",children:"Login"})})]})},g=n(11),m=n(22),v=n.n(m),x=n(43),_=n(14),w=n(46),S="auth/SET-USER-DATA",y={userID:null,email:null,login:null,isAuth:!1},P=function(t,e,n,a){return{type:S,payload:{id:t,email:e,login:n,isAuth:a}}},k=function(){return function(){var t=Object(x.a)(v.a.mark((function t(e){var n,a,r,s,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.me();case 2:0===(n=t.sent).data.resultCode&&(a=n.data.data,r=a.id,s=a.email,o=a.login,e(P(r,s,o,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(){return function(t){_.a.logout().then((function(e){0===e.data.resultCode&&t(P(null,null,null,!1))}))}},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return Object(d.a)(Object(d.a)({},t),e.payload);default:return t}},E=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).render=function(){return Object(h.jsx)(O,Object(d.a)({},t.props))},t}return n}(r.a.Component),T=Object(g.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logoutThunk:C})(E),N=n(56),F=n.n(N),U=function(){return Object(h.jsxs)("nav",{className:F.a.nav,children:[Object(h.jsx)(b.b,{to:"/profile",activeClassName:F.a.active,children:"Profile"}),Object(h.jsx)(b.b,{to:"/dialogs",activeClassName:F.a.active,children:"Messages"}),Object(h.jsx)(b.b,{to:"/users",activeClassName:F.a.active,children:"Find Users"})]})},A=n(9),D=n(42),M="ADD-POST",L="SET-USER",W="SET-STATUS",R="DELETE-POST;",z={posts:[{id:"1",message:"\u0421\u0442\u0435\u043d\u0430 \u041f\u0440\u0438\u0432\u0435\u0442!",likesCount:12},{id:"2",message:"\u0421\u0442\u0435\u043d\u0430 \u041a\u0430\u043a \u0434\u0435\u043b\u0430?",likesCount:4}],profile:null,status:""},H=function(t){return{type:W,status:t}},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case M:var n={id:5,message:e.newPostText,likesCount:0};return Object(d.a)(Object(d.a)({},t),{},{posts:[].concat(Object(D.a)(t.posts),[n])});case L:return Object(d.a)(Object(d.a)({},t),{},{profile:e.profile});case W:return Object(d.a)(Object(d.a)({},t),{},{status:e.status});case R:return Object(d.a)(Object(d.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.postID}))});default:return t}},G=n(131),X=n.n(G),Y=n.p+"static/media/avatar_2.e0878a2c.jpg",Z=function(t){return Object(h.jsxs)("div",{className:X.a.pageWall__newPost,children:[Object(h.jsx)("img",{src:Y,alt:"avatar"}),t.message,t.likesCount," ",Object(h.jsx)("button",{children:"like"})]})},q=n(89),J=n.n(q),K=n(126),Q=n(127),V=n(38),$=n(66),tt=Object(V.a)(30),et=Object($.a)("textarea"),nt=Object(Q.a)({form:"profileNewPostForm"})((function(t){return Object(h.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(h.jsx)(K.a,{name:"newPostText",component:et,validate:[tt],placeholder:"Write post..."}),Object(h.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"})]})})),at=function(t){var e=t.posts.map((function(t){return Object(h.jsx)(Z,{message:t.message,likesCount:t.likesCount},t.id)}));return Object(h.jsxs)("div",{className:J.a.pageWall,children:[Object(h.jsx)("span",{className:J.a.pageWall__title,children:"\u0421\u0442\u0435\u043d\u0430"}),Object(h.jsx)(nt,{onSubmit:function(e){t.addPost(e.newPostText)}}),e]})},rt=Object(g.b)((function(t){return{posts:t.profilePage.posts}}),{addPost:function(t){return{type:M,newPostText:t}}})(at),st=n(37),ot=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={editMode:!1,status:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.handleFocus=function(t){t.target.select()},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(t){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.state.editMode?Object(h.jsx)("input",{autoFocus:!0,onFocus:this.handleFocus,onChange:this.onStatusChange,onBlur:this.deactivateEditMode,value:this.state.status}):Object(h.jsx)("span",{onClick:this.activateEditMode,children:this.props.status})})}}]),n}(r.a.Component),ct=n(70),it=n.n(ct),ut=n(124),lt=function(t){if(!t.profile)return Object(h.jsx)(st.a,{});var e=t.profile.photos.small;return Object(h.jsxs)("div",{className:"".concat(it.a.pageInfo__data," ").concat(it.a.dataRow),children:[Object(h.jsx)("img",{src:null!==e?e:ut.a,alt:"avatar"}),Object(h.jsx)(ot,{status:t.status,updateStatus:t.updateStatus}),Object(h.jsxs)("div",{className:it.a.about,children:[Object(h.jsx)("p",{children:t.profile.aboutMe}),Object(h.jsx)("a",{href:t.profile.contacts.facebook,children:"facebook"}),Object(h.jsx)("a",{href:t.profile.contacts.website,children:"website"}),Object(h.jsx)("a",{href:t.profile.contacts.vk,children:"vk"}),Object(h.jsx)("a",{href:t.profile.contacts.twitter,children:"twitter"}),Object(h.jsx)("a",{href:t.profile.contacts.instagram,children:"instagram"}),Object(h.jsx)("a",{href:t.profile.contacts.youtube,children:"youtube"}),Object(h.jsx)("a",{href:t.profile.contacts.github,children:"github"})]})]})},dt=n(10),ft=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserID)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(lt,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}),Object(h.jsx)(rt,{})]})}}]),n}(r.a.Component),jt=Object(dt.d)(Object(g.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserID:t.auth.userID,isAuth:t.auth.isAuth}}),{getUserProfile:function(t){return function(e){_.c.getProfile(t).then((function(t){var n;e((n=t.data,{type:L,profile:n}))}))}},getStatus:function(t){return function(e){_.b.getStatus(t).then((function(t){e(H(t.data))}))}},updateStatus:function(t){return function(e){_.b.updateStatus(t).then((function(n){0===n.data.resultCode&&e(H(t))}))}}}),A.g)(ft),pt=n(45),bt=n.n(pt),ht=Object(V.a)(30),Ot=Object($.a)("input"),gt=Object(Q.a)({form:"loginForm"})((function(t){var e=t.handleSubmit,n=t.error;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("form",{onSubmit:e,children:Object(h.jsxs)("div",{className:"form",children:[Object(h.jsxs)("div",{className:bt.a.row,children:[Object(h.jsx)("label",{for:"email",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(h.jsx)(K.a,{id:"email",type:"email",name:"email",component:Ot,validate:[V.b,ht]})]}),Object(h.jsxs)("div",{className:bt.a.row,children:[Object(h.jsx)("label",{for:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(h.jsx)(K.a,{id:"password",type:"password",name:"password",component:Ot,validate:[V.b,ht]})]}),Object(h.jsx)("div",{className:bt.a.row,children:Object(h.jsxs)("label",{for:"save",children:[Object(h.jsx)(K.a,{id:"save",type:"checkbox",name:"rememberMe",component:Ot,validate:[]}),"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"]})}),Object(h.jsxs)("div",{className:bt.a.row,children:[Object(h.jsx)("button",{children:"\u0412\u043e\u0439\u0442\u0438"}),n&&Object(h.jsx)("span",{className:bt.a.formError,children:n})]})]})})})})),mt=Object(g.b)((function(t){return{isAuth:t.auth.isAuth,id:t.auth.id}}),{loginThunk:function(t,e,n){return function(a){_.a.login(t,e,n).then((function(t){if(0===t.data.resultCode)a(k());else{var e=t.data.messages,n=Object(w.a)("loginForm",{_error:e.length>0?e[0]:"Some error"});a(n)}}))}},logoutThunk:C})((function(t){return t.isAuth?Object(h.jsx)(A.a,{to:"/profile/".concat(t.id)}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(h.jsx)(gt,{onSubmit:function(e){t.loginThunk(e.email,e.password,e.rememberMe)},logoutThunk:C})]})})),vt="INITIALIZED_SUCCESS",xt={initialized:!1},_t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case vt:return Object(d.a)(Object(d.a)({},t),{},{initialized:!0});default:return t}},wt=n(125),St=n(129),yt=n(133),Pt=n(128),kt=Object(dt.c)({profilePage:B,messagesPage:wt.a,usersPage:St.a,auth:I,app:_t,form:Pt.a}),Ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dt.d,It=Object(dt.e)(kt,Ct(Object(dt.a)(yt.a))),Et=function(t){return function(e){return Object(h.jsx)(a.Suspense,{fallback:Object(h.jsx)(st.a,{}),children:Object(h.jsx)(t,Object(d.a)({},e))})}},Tt=r.a.lazy((function(){return n.e(4).then(n.bind(null,295))})),Nt=r.a.lazy((function(){return n.e(3).then(n.bind(null,294))})),Ft=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppThunk()}},{key:"render",value:function(){var t=this;return this.props.initialized?Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"app-wrapper",children:[Object(h.jsx)(T,{}),Object(h.jsx)(U,{}),Object(h.jsx)("div",{className:"app-wrapper-content",children:Object(h.jsxs)(A.d,{children:[Object(h.jsx)(A.a,{exact:!0,from:"/",to:"/profile"}),Object(h.jsx)(A.b,{path:"/dialogs",render:Et(Tt)}),Object(h.jsx)(A.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(jt,{})}}),Object(h.jsx)(A.b,{path:"/users",render:Et(Nt)}),Object(h.jsx)(A.b,{path:"/login",render:function(){return Object(h.jsx)(mt,{login:t.props.login})}})]})})]})}):Object(h.jsx)(st.a,{})}}]),n}(r.a.Component),Ut=Object(dt.d)(A.g,Object(g.b)((function(t){return{initialized:t.app.initialized}}),{initializeAppThunk:function(){return function(t){Promise.all([t(k())]).then((function(){t({type:vt})}))}}}))(Ft),At=function(t){return Object(h.jsx)(b.a,{children:Object(h.jsx)(g.a,{store:It,children:Object(h.jsx)(Ut,{})})})},Dt=(n(288),function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,293)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),s(t),o(t)}))});o.a.render(Object(h.jsx)(At,{}),document.getElementById("root")),Dt()},37:function(t,e,n){"use strict";n(0);var a=n.p+"static/media/preloader.4ae1bcf5.svg",r=n(1);e.a=function(){return Object(r.jsx)("img",{src:a,alt:"preloader"})}},38:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r}));var a=function(t){return t?void 0:"Field required"},r=function(t){return function(e){return e&&e.length>t?"Max length is ".concat(t," symbols"):void 0}}},44:function(t,e,n){t.exports={header:"Header_header__3vTSi",loginBlock:"Header_loginBlock__6uxXp",login_name:"Header_login_name__wMDmp",logout:"Header_logout__1ZICm",login_link:"Header_login_link__27bgb"}},45:function(t,e,n){t.exports={form:"Login_form__2iBfo",row:"Login_row__3d41Y",formError:"Login_formError__3j1Nj"}},56:function(t,e,n){t.exports={nav:"Navbar_nav__3R0rh",active:"Navbar_active__2b-XZ"}},66:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(5),r=n(134),s=(n(0),n(90)),o=n.n(s),c=n(1),i=function(t){return function(e){var n=e.input,s=e.meta,i=s.touched,u=s.error,l=Object(r.a)(e,["input","meta"]),d=i&&u;return Object(c.jsxs)("div",{className:o.a.formControl+" "+(d?o.a.error:""),children:[Object(c.jsx)(t,Object(a.a)(Object(a.a)({},n),l)),d&&Object(c.jsx)("span",{children:u})]})}}},70:function(t,e,n){t.exports={pageInfo__data:"ProfileInfo_pageInfo__data__1OoU4",about:"ProfileInfo_about__3U-jH",dataRow:"ProfileInfo_dataRow__UsqXF"}},89:function(t,e,n){t.exports={pageWall:"Wall_pageWall__1-MWp",pageWall__title:"Wall_pageWall__title__2QIQW"}},90:function(t,e,n){t.exports={formControl:"FormsControls_formControl__3IH-n",error:"FormsControls_error__3Y1wO"}}},[[289,1,2]]]);
//# sourceMappingURL=main.8e1af7a3.chunk.js.map
{"version":3,"sources":["services/hooks/useResizeWindow.tsx","components/User/User.module.scss","components/Search/Search.module.scss","services/hooks/useObserver.tsx","components/User/Tooltip/Tooltip.tsx","components/User/User.tsx","components/Search/stylesCustomMaterialUI.jsx","components/Search/Search.tsx","pages/Users/Users.module.scss","services/hooks/useQueryUrl.tsx","pages/Users/Users.tsx","pages/Users/UsersContainer.tsx"],"names":["useResizeWindow","useState","window","innerWidth","widthScreen","setWidthScreen","useEffect","handleResizeWindow","addEventListener","removeEventListener","module","exports","useObserver","elementTrigger","isCanLoad","isFetching","callback","observer","useRef","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","Tooltip","element","children","memo","User","props","user","id","photos","name","status","followed","symbolCount","setSymbolCount","className","s","wrapAvatarNameAndStatus","wrapAvatar","Avatar","photo","large","size","nameAndStatus","WithTooltip","Name","Status","ButtonFollow","setIsFollowed","length","wrapName","useStyles","makeStyles","theme","search","padding","spacing","paddingLeft","width","borderRadius","backgroundColor","Search","pathname","termOfUrl","searchUsers","totalUsersCount","classes","isShowPrompt","setIsShowPrompt","handleChange","useCallback","e","target","value","handleDebounce","useMemo","debounce","cancel","container","searchWrap","searchIcon","InputBase","placeholder","inputProps","input","onChange","onInput","searchCount","toString","replace","Prompt","SearchUsers","useQueryUrl","history","useHistory","setTermOfUrl","parsed","queryString","parse","location","substr","term","Users","pageSize","useAppSelector","getPageSize","users","getUsersSelector","getIsFetching","getTotalUsersCount","dispatch","useAppDispatch","useLocation","pageNumber","setPageNumber","isShowMoreUsersButton","setIsShowMoreUsersButton","maxPageCount","Math","ceil","getUsers","page","handleShowMoreUsers","lastElement","React","visuallyHidden","PaginationUsers","NoElement","elements","writeSomething","wrapUsers","map","u","ref","cn","buttonLoadMore","hiddenButtonLoadMore","IconButton","title","onClick","withAuthRedirect","Preloader","display"],"mappings":"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","file":"static/js/5.f0fbbb4d.chunk.js","sourcesContent":["import { useEffect, useState } from 'react'\n\nconst useResizeWindow = () => {\n  const [widthScreen, setWidthScreen] = useState(window.innerWidth)\n\n  useEffect(() => {\n    const handleResizeWindow = () => setWidthScreen(window.innerWidth)\n\n    window.addEventListener('resize', handleResizeWindow)\n    return () => {\n      window.removeEventListener('resize', handleResizeWindow)\n    }\n  }, [widthScreen, setWidthScreen])\n\n  return widthScreen\n}\n\nexport default useResizeWindow\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__2wfAk\",\"wrapAvatarNameAndStatus\":\"User_wrapAvatarNameAndStatus__3ZFGx\",\"wrapAvatar\":\"User_wrapAvatar__3xjij\",\"nameAndStatus\":\"User_nameAndStatus__1MJOp\",\"wrapName\":\"User_wrapName__14Fu7\",\"status\":\"User_status__bn8rk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Search_container__1sCS3\",\"searchWrap\":\"Search_searchWrap__1VAEz\",\"searchIcon\":\"Search_searchIcon__3oISE\",\"searchCount\":\"Search_searchCount__31o5E\",\"search\":\"Search_search__ntywA\"};","import { useEffect, useRef } from 'react'\n\nconst useObserver = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  elementTrigger: React.RefObject<any>,\n  isCanLoad: boolean,\n  isFetching: boolean,\n  callback: () => void\n) => {\n  const observer = useRef<IntersectionObserver | undefined>()\n\n  useEffect(() => {\n    if (isFetching) return\n    if (observer.current) observer.current.disconnect()\n\n    const _callback = (entries: IntersectionObserverEntry[]) => {\n      // when the ref disappears from the visibility zone,\n      // the callback will not work\n      if (entries[0].isIntersecting && isCanLoad) {\n        callback()\n      }\n    }\n    observer.current = new IntersectionObserver(_callback)\n    observer.current.observe(elementTrigger.current)\n  }, [isFetching, callback, isCanLoad, elementTrigger])\n}\n\nexport default useObserver\n","import React, { memo } from 'react'\nimport './Tooltip.module.scss'\n\ntype PropsType = {\n  element: string\n  children: React.ReactNode\n}\n\nconst Tooltip: React.FC<PropsType> = ({ element, children }) => {\n  return <div data-tooltip={element}>{children}</div>\n}\n\nexport default memo(Tooltip)\n","import React, { useEffect, useState, memo } from 'react'\n\nimport s from './User.module.scss'\n\nimport Name from '../Name/Name'\nimport Avatar from '../Avatar/Avatar'\nimport Tooltip from './Tooltip/Tooltip'\nimport ButtonFollow from '../ButtonFollow/ButtonFollow'\nimport useResizeWindow from '../../services/hooks/useResizeWindow'\n\nimport { UserType } from '../../types/types'\n\nconst User: React.FC<{ user: UserType }> = (props) => {\n  const {\n    user: { id, photos, name, status, followed },\n  } = props\n\n  const [symbolCount, setSymbolCount] = useState(19)\n  const widthScreen = useResizeWindow()\n\n  useEffect(() => {\n    if (widthScreen <= 735) {\n      setSymbolCount(10)\n    }\n  }, [widthScreen])\n\n  return (\n    <article className={s.user}>\n      <div className={s.wrapAvatarNameAndStatus}>\n        <div className={s.wrapAvatar}>\n          <Avatar photo={photos.large} size='large' id={id} />\n        </div>\n        <div className={s.nameAndStatus}>\n          <WithTooltip.Name id={id} name={name} symbolCount={symbolCount} />\n          <WithTooltip.Status status={status} symbolCount={symbolCount} />\n        </div>\n      </div>\n      <ButtonFollow id={id} followed={followed} setIsFollowed={null} />\n    </article>\n  )\n}\n\ntype NameWithTooltipPropsType = {\n  id: number\n  name: string\n  symbolCount: number\n}\n\ntype StatusWithTooltipPropsType = {\n  status: string\n  symbolCount: number\n}\n\nconst WithTooltip = {\n  Name: memo<NameWithTooltipPropsType>(({ id, name, symbolCount }) => (\n    <>\n      {name?.length > symbolCount ? (\n        <Tooltip element={name}>\n          <div className={s.wrapName}>\n            <Name id={id} name={name} size='normal' />\n          </div>\n        </Tooltip>\n      ) : (\n        <div className={s.wrapName}>\n          <Name id={id} name={name} size='normal' />\n        </div>\n      )}\n    </>\n  )),\n\n  Status: memo<StatusWithTooltipPropsType>(({ status, symbolCount }) => (\n    <>\n      {status?.length > symbolCount ? (\n        <Tooltip element={status}>\n          <div className={s.status}>\n            <i>{status}</i>\n          </div>\n        </Tooltip>\n      ) : (\n        <div className={s.status}>\n          <i>{status}</i>\n        </div>\n      )}\n    </>\n  )),\n}\n\nexport default memo(User)\n","import { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    width: '100%',\n\n    '&:focus': {\n      borderRadius: '5px',\n      backgroundColor: '#5e5e5e4d',\n    },\n  },\n}))\n\nexport default useStyles\n","import React, { useCallback, memo, useMemo, useEffect, useState } from 'react'\nimport debounce from 'lodash/debounce'\n\nimport InputBase from '@material-ui/core/InputBase'\nimport SearchIcon from '@material-ui/icons/Search'\nimport useStyles from './stylesCustomMaterialUI'\nimport s from './Search.module.scss'\n\nimport Prompt from '../Prompt/Prompt'\n\ntype PropsType = {\n  pathname: string\n  termOfUrl: string\n  isFetching: boolean\n  totalUsersCount: number\n  searchUsers: (term: string) => void\n}\n\nconst Search: React.FC<PropsType> = (props) => {\n  const { pathname, termOfUrl, searchUsers, totalUsersCount, isFetching } =\n    props\n  const classes = useStyles()\n\n  const [isShowPrompt, setIsShowPrompt] = useState(true)\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      searchUsers(e.target.value)\n      setIsShowPrompt(false)\n    },\n    [searchUsers]\n  )\n\n  const handleDebounce = useMemo(\n    () => debounce(handleChange, 600),\n    [handleChange]\n  )\n\n  useEffect(() => {\n    return function cleanup() {\n      handleDebounce.cancel()\n    }\n  })\n\n  return (\n    <div className={s.container}>\n      <div className={s.searchWrap}>\n        <div className={s.searchIcon}>\n          <SearchIcon />\n        </div>\n        {pathname === '/users' && (\n          <InputBase\n            placeholder='Search by name...'\n            inputProps={{ 'aria-label': 'search' }}\n            classes={{ input: classes.search }}\n            value={termOfUrl}\n            onChange={handleChange}\n          />\n        )}\n        {pathname === '/friends' && (\n          <InputBase\n            placeholder='Search by name...'\n            inputProps={{ 'aria-label': 'search' }}\n            classes={{ input: classes.search }}\n            onInput={handleDebounce}\n          />\n        )}\n      </div>\n      <div className={s.searchCount}>\n        Total: {totalUsersCount.toString().replace(/(\\d)(?=(\\d{3})+$)/g, '$1 ')}\n        {/* adding space between numbers: (? = pattern) + - greedy repeating\n        the last pattern one or more times to the end of the line $ */}\n      </div>\n\n      {isShowPrompt && !isFetching && (\n        <Prompt.SearchUsers pathname={pathname} />\n      )}\n    </div>\n  )\n}\n\nexport default memo(Search)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visuallyHidden\":\"Users_visuallyHidden__1Hqf2\",\"elementInteractive\":\"Users_elementInteractive__1wNUn\",\"container\":\"Users_container__2qzjv\",\"wrapUsers\":\"Users_wrapUsers__3HYNC\",\"buttonLoadMore\":\"Users_buttonLoadMore__30Hx-\",\"hiddenButtonLoadMore\":\"Users_hiddenButtonLoadMore__1dofL\",\"users\":\"Users_users__231_B\"};","import { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport queryString from 'query-string'\n\nconst useQueryUrl = (pathname: string) => {\n  const history = useHistory()\n  const [termOfUrl, setTermOfUrl] = useState('')\n\n  // get from URL term, if present\n  useEffect(() => {\n    const parsed = queryString.parse(history.location.search.substr(1)) as {\n      term: string\n    } // substr(1) = delete ? at the beginning\n\n    if (parsed.term) {\n      setTermOfUrl(parsed.term)\n    }\n  }, [history.location.search, pathname, setTermOfUrl])\n\n  // push entered from search into URL\n  useEffect(() => {\n    history.replace({\n      pathname,\n      search: termOfUrl ? `?term=${termOfUrl}` : '',\n    })\n  }, [termOfUrl, history, pathname])\n\n  return { termOfUrl, setTermOfUrl }\n}\n\nexport default useQueryUrl\n","import React, { useState, useEffect, useCallback, memo } from 'react'\nimport { useLocation } from 'react-router-dom'\n\nimport cn from 'classnames'\nimport IconButton from '@material-ui/core/IconButton'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport s from './Users.module.scss'\n\nimport User from '../../components/User/User'\nimport Search from '../../components/Search/Search'\nimport Prompt from '../../components/Prompt/Prompt'\nimport NoElement from '../../components/NoElement/NoElement'\nimport useQueryUrl from '../../services/hooks/useQueryUrl'\nimport useObserver from '../../services/hooks/useObserver'\nimport { useAppDispatch, useAppSelector } from '../../services/hooks/useApp'\n\nimport {\n  getIsFetching,\n  getPageSize,\n  getTotalUsersCount,\n  getUsersSelector,\n} from '../../store/selectors/users-selectors'\nimport { getUsers } from '../../store/reducers/users-reducer'\n\nimport { UserType } from '../../types/types'\n\nconst Users: React.FC = () => {\n  const pageSize = useAppSelector(getPageSize)\n  const users = useAppSelector(getUsersSelector)\n  const isFetching = useAppSelector(getIsFetching)\n  const totalUsersCount = useAppSelector(getTotalUsersCount)\n\n  const dispatch = useAppDispatch()\n  const { pathname } = useLocation()\n  const { termOfUrl, setTermOfUrl } = useQueryUrl(pathname)\n\n  // eslint-disable-next-line prefer-const\n  let [pageNumber, setPageNumber] = useState(1)\n  const [isShowMoreUsersButton, setIsShowMoreUsersButton] = useState(true)\n\n  const maxPageCount = Math.ceil(totalUsersCount / pageSize)\n\n  // for Search\n  const searchUsers = useCallback(\n    (term: string) => {\n      setPageNumber(1)\n      setTermOfUrl(term)\n      dispatch(getUsers({ page: 1, term }))\n\n      if (maxPageCount === pageNumber) {\n        setIsShowMoreUsersButton(false)\n      }\n      if (maxPageCount > pageNumber) {\n        setIsShowMoreUsersButton(true)\n      }\n    },\n    [dispatch, maxPageCount, pageNumber, setTermOfUrl]\n  )\n\n  useEffect(() => {\n    if (totalUsersCount > pageSize) {\n      setIsShowMoreUsersButton(true)\n    } else {\n      setIsShowMoreUsersButton(false)\n    }\n  }, [maxPageCount, totalUsersCount, pageSize])\n\n  useEffect(() => {\n    dispatch(getUsers({ page: 1, term: termOfUrl }))\n  }, [termOfUrl, pathname, dispatch])\n\n  const handleShowMoreUsers = useCallback(() => {\n    if (maxPageCount > pageNumber) {\n      setPageNumber(++pageNumber)\n      dispatch(getUsers({ page: pageNumber, term: termOfUrl }))\n    }\n    if (maxPageCount === pageNumber) {\n      setIsShowMoreUsersButton(false)\n    }\n  }, [dispatch, maxPageCount, pageNumber, termOfUrl])\n\n  // removing a prompt\n  const [isShowPrompt, setIsShowPrompt] = useState(true)\n  const lastElement = React.useRef<HTMLDivElement>(null)\n\n  useObserver(lastElement, pageNumber === 1, isFetching, () => {\n    setIsShowPrompt(false)\n  })\n\n  return (\n    <main className={s.container}>\n      <h1 className={s.visuallyHidden}>Users</h1>\n      {pageNumber === 1 && !isFetching && isShowPrompt && (\n        <Prompt.PaginationUsers pathname={pathname} />\n      )}\n\n      <Search\n        pathname={pathname}\n        termOfUrl={termOfUrl}\n        isFetching={isFetching}\n        searchUsers={searchUsers}\n        totalUsersCount={totalUsersCount}\n      />\n\n      {totalUsersCount === 0 && !isFetching && (\n        <NoElement elements='users' writeSomething={false} />\n      )}\n\n      <div className={s.wrapUsers}>\n        <div className={s.users}>\n          {users.map((u: UserType) => (\n            <User\n              key={u.id}\n              user={{\n                id: u.id,\n                name: u.name,\n                status: u.status,\n                followed: u.followed,\n                photos: u.photos,\n              }}\n            />\n          ))}\n        </div>\n\n        <div\n          ref={lastElement}\n          className={cn(s.buttonLoadMore, {\n            [s.hiddenButtonLoadMore]: !isShowMoreUsersButton,\n          })}\n        >\n          <IconButton title='Load more users' onClick={handleShowMoreUsers}>\n            <ExpandMoreIcon />\n          </IconButton>\n        </div>\n      </div>\n    </main>\n  )\n}\n\nexport default memo(Users)\n","import React from 'react'\n\nimport Users from './Users'\nimport Preloader from '../../components/Preloader/Preloader'\nimport { useAppSelector } from '../../services/hooks/useApp'\nimport withAuthRedirect from '../../services/hoc/withAuthRedirect'\n\nimport { getIsFetching } from '../../store/selectors/users-selectors'\n\nconst UsersContainer = () => {\n  const isFetching = useAppSelector(getIsFetching)\n\n  return (\n    <>\n      {isFetching ? <Preloader display='default' /> : null}\n      <Users />\n    </>\n  )\n}\n\nexport default withAuthRedirect(UsersContainer)\n"],"sourceRoot":""}
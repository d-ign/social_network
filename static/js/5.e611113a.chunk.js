(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[5],{455:function(e,t,a){"use strict";var s=a(11),r=a(1);t.a=function(){var e=Object(r.useState)(window.innerWidth),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){var e=function(){return n(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[a,n]),a}},470:function(e,t,a){e.exports={chat:"Chat_chat__1rEwv",membersAndMessages:"Chat_membersAndMessages__2ItM4",form:"Chat_form__Fkn99"}},471:function(e,t,a){e.exports={container:"ChatMembers_container__e_-rU",visuallyHidden:"ChatMembers_visuallyHidden__3uaU0",elementInteractive:"ChatMembers_elementInteractive__3vDh8",inputHiddenBeforeFolding:"ChatMembers_inputHiddenBeforeFolding__RXHe1",titleWrap:"ChatMembers_titleWrap__2uSSk",title:"ChatMembers_title__ZYl8G",titleArrow:"ChatMembers_titleArrow__1OZGL",members:"ChatMembers_members__ulC2j",member:"ChatMembers_member__3F1wG",wrapName:"ChatMembers_wrapName__nfvvz",buttonShowAllWrap:"ChatMembers_buttonShowAllWrap__T-zs6",buttonShowAll:"ChatMembers_buttonShowAll__3S5vv",notShowMembers:"ChatMembers_notShowMembers__14IbE",titleWrapDeployed:"ChatMembers_titleWrapDeployed__Ujnk5"}},472:function(e,t,a){e.exports={buttonSortWrap:"ChatButtonSort_buttonSortWrap__iGn4h",buttonSortNotShowMembers:"ChatButtonSort_buttonSortNotShowMembers__YqxJ0",buttonSort:"ChatButtonSort_buttonSort__2ekxv"}},473:function(e,t,a){"use strict";var s=a(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(55)),n=a(0),i=(0,r.default)((0,n.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");t.default=i},474:function(e,t,a){"use strict";var s=a(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(55)),n=a(0),i=(0,r.default)((0,n.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.default=i},475:function(e,t,a){"use strict";var s=a(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(55)),n=a(0),i=(0,r.default)((0,n.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.default=i},476:function(e,t,a){e.exports={container:"ChatMessages_container__FHgFA",visuallyHidden:"ChatMessages_visuallyHidden__1zqjT",elementInteractive:"ChatMessages_elementInteractive__1PZ8K"}},477:function(e,t,a){e.exports={myMessageContainer:"ChatMessage_myMessageContainer__1mzJy",messageContainer:"ChatMessage_messageContainer__cksYS",message:"ChatMessage_message__1_CEE",nameAndMessage:"ChatMessage_nameAndMessage__1_LdY",avatar_size_medium:"ChatMessage_avatar_size_medium__1w73R",avatar_size_small:"ChatMessage_avatar_size_small__2gXJg"}},478:function(e,t,a){"use strict";var s=a(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(55)),n=a(0),i=(0,r.default)((0,n.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=i},497:function(e,t,a){"use strict";a.r(t);var s=a(11),r=a(1),n=a(454),i=a(478),c=a.n(i),o=a(446),l=a(470),u=a.n(l),m=a(23),b=a(3),d=a(20),j=a.n(d),h=a(475),_=a.n(h),O=a(471),v=a.n(O),f=a(474),p=a.n(f),x=a(473),g=a.n(x),S=a(234),M=a(472),w=a.n(M),C=a(0),N=function(e){var t=e.theme,a=e.isReverseSort,s=e.setIsReverseSort,r=e.isShowAll,n=e.isShowMembers;return Object(C.jsx)("div",{className:j()(w.a.buttonSortWrap,Object(b.a)({},w.a.buttonSort,n),Object(b.a)({},w.a.buttonSortNotShowMembers,!n)),children:Object(C.jsx)(S.a,{onClick:function(){return s(!a)},disabled:!r,startIcon:a?Object(C.jsx)(g.a,{}):Object(C.jsx)(p.a,{}),style:{fontSize:"10px",marginBottom:"5px",padding:"3px 10px 3px 7px"},color:"theme1"===t?"primary":"secondary",children:"sort by name"})})},y=a(87),A=a(172),z=a(455),I=a(10),W=function(e){return e.chatPage.messages},H=function(e){return e.chatPage.messages.filter((function(e,t,a){return a.findIndex((function(t){return t.userId===e.userId}))===t?e:null}))},k=function(e){return e.chatPage.statusWS},E=function(e){var t=e.isShowMembers,a=e.setIsShowMembers,s=Object(z.a)(),r=function(){s<=760&&a(!t)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{className:v.a.visuallyHidden,children:"Chat members"}),Object(C.jsxs)("div",{"aria-hidden":"true",onChange:r,children:[Object(C.jsx)("input",{className:j()(v.a.visuallyHidden,v.a.inputHiddenBeforeFolding)}),Object(C.jsxs)("div",{"aria-hidden":"true",className:j()(v.a.titleWrap,v.a.elementInteractive,Object(b.a)({},v.a.titleWrapDeployed,t)),onClick:r,children:[Object(C.jsx)("h1",{className:v.a.title,children:"Members"}),Object(C.jsx)("span",{className:v.a.titleArrow,children:Object(C.jsx)(_.a,{fontSize:"small"})})]})]})]})},F=function(e){var t=e.chatMembers,a=e.isShowAll,s=e.setIsShowAll;return Object(C.jsx)(C.Fragment,{children:t.length>2&&!a?Object(C.jsx)("div",{className:v.a.buttonShowAllWrap,children:Object(C.jsxs)("button",{type:"button",className:v.a.buttonShowAll,onClick:function(){return s(!0)},children:["show all ",t.length," ..."]})}):""})},P=function(e){var t=e.theme,a=Object(I.b)(H),n=Object(r.useState)(!1),i=Object(s.a)(n,2),c=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(s.a)(l,2),d=u[0],h=u[1],_=Object(r.useState)(!1),O=Object(s.a)(_,2),f=O[0],p=O[1],x=c?a.length:2;return Object(C.jsxs)("section",{hidden:!a.length,className:v.a.container,children:[Object(C.jsx)(E,{isShowMembers:f,setIsShowMembers:p}),Object(C.jsx)(N,{theme:t,isShowAll:c,isShowMembers:f,isReverseSort:d,setIsReverseSort:h}),Object(C.jsxs)("div",{className:j()(Object(b.a)({},v.a.members,f),Object(b.a)({},v.a.notShowMembers,!f)),children:[a&&Object(m.a)(a).slice(0,x).sort((function(e,t){return d?t.userName.localeCompare(e.userName):e.userName.localeCompare(t.userName)})).map((function(e){return Object(C.jsxs)("div",{className:v.a.member,children:[Object(C.jsx)(y.a,{photo:e.photo,size:"small",id:e.userId}),Object(C.jsx)("div",{className:v.a.wrapName,children:Object(C.jsx)(A.a,{id:e.userId,name:e.userName,size:"small"})})]},e.userId)})),Object(C.jsx)(F,{chatMembers:a,isShowAll:c,setIsShowAll:o})]})]})},D=a(476),B=a.n(D),R=a(477),L=a.n(R),T=a(31),J=function(e){var t=e.message,a=t.userId,s=t.photo,r=t.userName,n=t.message,i=Object(I.b)(T.a);return Object(C.jsxs)("article",{className:j()(L.a.messageContainer,Object(b.a)({},L.a.myMessageContainer,i===a)),children:[Object(C.jsx)("div",{className:L.a.avatar_size_medium,children:Object(C.jsx)(y.a,{photo:s,size:"medium",id:a})}),Object(C.jsx)("div",{hidden:!0,className:L.a.avatar_size_small,children:Object(C.jsx)(y.a,{photo:s,size:"small",id:a})}),Object(C.jsxs)("div",{className:L.a.nameAndMessage,children:[Object(C.jsx)(A.a,{id:a,name:r}),Object(C.jsx)("div",{className:L.a.message,children:n})]})]})},G=Object(r.memo)(J),U=a(174),Y=function(){var e=Object(I.b)(W),t=Object(r.useRef)(null),a=Object(r.useState)(!0),n=Object(s.a)(a,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var e;i&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e,i]),Object(C.jsxs)("section",{className:B.a.container,onScroll:function(e){var t=e.currentTarget,a=t.scrollHeight-t.scrollTop-t.clientHeight;Math.abs(a)<1?i||c(!0):i&&c(!1)},children:[Object(C.jsx)("h1",{className:B.a.visuallyHidden,children:"Chat messages"}),e.length?e.filter((function(e){return e.message.trim().length>0})).map((function(e){return Object(C.jsx)(G,{message:e},e.id)})):Object(C.jsx)(U.a,{elements:"messages",writeSomething:!0}),Object(C.jsx)("div",{ref:t})]})},Z=Object(r.memo)(Y),q=a(175),K=a(27),X=a(213),V=function(e){var t=e.theme,a=e.status,i=Object(I.a)(),l=Object(r.useState)(""),m=Object(s.a)(l,2),b=m[0],d=m[1];return Object(C.jsx)("div",{className:u.a.wrapForm,children:Object(C.jsxs)("div",{className:u.a.form,children:[Object(C.jsx)(o.a,{name:"newMessageText",placeholder:"Enter your message...",fullWidth:!0,variant:"outlined",inputProps:{maxLength:100},color:"theme1"===t?"primary":"secondary",onChange:function(e){return d(e.currentTarget.value)},value:b}),Object(C.jsx)(n.a,{title:"Send message",color:"theme1"===t?"primary":"secondary",style:{margin:"5px"},onClick:function(){b.trim()&&(i(Object(X.b)(b)),d(""))},disabled:"pending"===a,size:"large",children:Object(C.jsx)(c.a,{})})]})})};t.default=Object(q.a)((function(){var e=Object(I.b)(k),t=Object(I.b)(K.b),a=Object(I.a)();return Object(r.useEffect)((function(){return a(Object(X.c)()),function(){a(Object(X.d)())}}),[a]),Object(C.jsxs)("main",{className:u.a.chat,children:["error"===e&&Object(C.jsx)("div",{children:"Some error occured. Please, refresh the page..."}),Object(C.jsxs)("div",{className:u.a.membersAndMessages,children:[Object(C.jsx)(Z,{}),Object(C.jsx)(P,{theme:t})]}),Object(C.jsx)(V,{theme:t,status:e})]})}))}}]);
//# sourceMappingURL=5.e611113a.chunk.js.map